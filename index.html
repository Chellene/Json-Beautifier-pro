<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JSON Beautifier Pro</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css?family=Inter:400,500,700&display=swap" rel="stylesheet">
  <script>
    // Solo carga AdSense si NO es localhost, 127.0.0.1, ni file://
    if (
      !location.hostname.match(/^(localhost|127\.0\.0\.1)$/) &&
      !location.protocol.startsWith('file')
    ) {
      var s = document.createElement('script');
      s.async = true;
      s.src = "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7902157674688237";
      document.head.appendChild(s);

      var meta = document.createElement('meta');
      meta.name = "google-adsense-account";
      meta.content = "ca-pub-7902157674688237";
      document.head.appendChild(meta);
    }
  </script>
</head>

<body>
  <div id="toast" class="toast"></div>
  <!-- HEADER PREMIUM -->
  <header style="display:grid;grid-template-columns:1.5fr 1fr 1.5fr;align-items:center;">
    <div style="display:flex;align-items:center;gap:.9em;">
      <button id="toggle-theme" title="Cambiar modo claro/oscuro" style="margin-right:1em;">üåó</button>
      <img src="logo.svg" class="logo" alt="JSON Beautifier Pro" />
      <h1 style="margin:0;">JSON Beautifier <span class="pro-badge">PRO</span></h1>
    </div>
    <!-- BANNER DE ANUNCIOS CENTRADO -->
<div style="display:flex;align-items:center;justify-content:flex-end;">
      </div>
  </header>
  <!-- MAIN DE TU APP -->
  <main>
    <section class="main-card">
      <div class="input-panel">
        <label for="json-input"><strong>JSON de entrada:</strong></label>
        <textarea id="json-input" placeholder="Pega o arrastra tu JSON aqu√≠..."></textarea>
        <div class="autovalidate-bar">
          <label>
            <input type="checkbox" id="autovalidate-checkbox" />
            Validar autom√°ticamente mientras escribes
          </label>
        </div>
        <div class="controls">
          <button id="btn-file"><span>üìÇ</span> Seleccionar archivo</button>
          <input type="file" id="file-input" accept=".json" style="display:none">
          <button id="btn-format">Formatear</button>
          <button id="btn-validate">Validar</button>
          <button id="btn-clear">Limpiar</button>
          <button id="btn-undo" title="Deshacer">&#8630;</button>
          <button id="btn-redo" title="Rehacer">&#8631;</button>
          <select id="indent" title="Espacios de indentaci√≥n">
            <option value="2">2 espacios</option>
            <option value="4">4 espacios</option>
            <option value="6">6 espacios</option>
          </select>
        </div>
        <div class="convert-controls">
          <button id="btn-xml" class="free-badge">Convertir a XML <span class="badge-free">Gratis</span></button>
          <button id="btn-csv" class="free-badge">Convertir a CSV <span class="badge-free">Gratis</span></button>
	  <button id="btn-pdf" class="pro-badge-btn">Exportar a PDF <span class="badge-pro">Gratis</span></button>
	  <button id="btn-excel" class="pro-badge-btn">Convertir a Excel <span class="badge-pro">Gratis</span></button>
          <button id="btn-yaml" class="pro-badge-btn">Convertir a YAML <span class="badge-pro">Gratis</span></button>
          <button id="btn-download" class="pro-badge-btn">Descargar JSON <span class="badge-pro">Gratis</span></button>
        </div>
      </div>
      <div class="output-panel">
        <div class="output-tabs">
          <button id="tab-formatted" class="active">Formateado</button>
          <button id="tab-tree">Vista √Årbol</button>
          <button id="tab-convert">Convertido</button>
          <button id="tab-favs" class="pro-badge-btn">Favoritos <span class="badge-pro">Gratis</span></button>
        </div>
        <div class="output-views">
          <pre id="json-output"></pre>
          <!-- √Årbol PRO -->
          <div id="tree-output" class="hidden"></div>
          <div id="converted-output" class="hidden"></div>
          <div id="favs-output" class="hidden"></div>
        </div>
        <div class="output-actions">
          <button id="btn-copy" title="Copiar al portapapeles">Copiar</button>
          <button id="btn-fav" class="pro-badge-btn">Guardar favorito <span class="badge-pro">Gratis</span></button>
          <button id="btn-share">Compartir</button>
        </div>
        <!-- Men√∫ contextual de √°rbol PRO (invisible hasta que se usa) -->
        <div id="tree-menu-contextual" class="tree-menu-contextual" style="display:none;">
          <button class="ctx-copy-key">Copiar clave</button>
          <button class="ctx-copy-value">Copiar valor</button>
          <button class="ctx-copy-branch">Copiar rama</button>
        </div>
      </div>
      <div id="csv-table-panel" class="hidden"></div>
    </section>
  </main>

  <!-- PANEL DE DONACIONES ABAJO -->
  <section class="donation-panel">
    <div class="donation-content">
      <span class="donation-msg">
        Esta herramienta es <b>totalmente gratuita</b>. Si te ha ayudado, puedes apoyarla con una donaci√≥n y contribuir a su mejora.
      </span>
      <a href="https://www.paypal.me/oscargrubio" target="_blank" class="paypal-btn">
        <img src="https://www.paypalobjects.com/webstatic/icon/pp258.png" alt="PayPal" style="height:1.5em;vertical-align:middle;margin-right:.4em;">
        Inv√≠tame a un caf√©
      </a>
    </div>
  </section>

  <footer>
    <div>
      <span><b>JSON Beautifier Pro</b> &copy; 2025</span>
    </div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
